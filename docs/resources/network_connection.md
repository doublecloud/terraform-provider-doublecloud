---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "doublecloud_network_connection Resource - terraform-provider-doublecloud"
subcategory: ""
description: |-
  Network Connection resource
---

# doublecloud_network_connection (Resource)

Network Connection resource

## Example Usage

```terraform
# Create DoubleCloud Network
resource "doublecloud_network" "example" {
  project_id      = var.project_id
  name            = "example"
  region_id       = "eu-central-1"
  cloud_type      = "aws"
  ipv4_cidr_block = "10.42.0.0/16"
}

# Create AWS VPC
resource "aws_vpc" "own" {
  cidr_block                       = "10.0.0.0/16"
  assign_generated_ipv6_cidr_block = true
}

# Get AWS AccountID
data "aws_caller_identity" "self" {}

# Get AWS RegionID
data "aws_region" "current" {}

# Create VPC Peering from DoubleCloud Network to AWS VPC
resource "doublecloud_network_connection" "example" {
  network_id = doublecloud_network.example.id
  aws = {
    peering = {
      vpc_id          = aws_vpc.own.id
      account_id      = data.aws_caller_identity.self.account_id
      region_id       = data.aws_region.current.id
      ipv4_cidr_block = aws_vpc.own.cidr_block
      ipv6_cidr_block = aws_vpc.own.ipv6_cidr_block
    }
  }
}

# Accept Peering Request on AWS side
resource "aws_vpc_peering_connection_accepter" "own" {
  vpc_peering_connection_id = doublecloud_network_connection.example.aws.peering.peering_connection_id
  auto_accept               = true
}

# Confirm Peering creation
resource "doublecloud_network_connection_accepter" "accept" {
  id = doublecloud_network_connection.example.id
}

# Create routes to DoubleCloud Network
resource "aws_route" "ipv4" {
  route_table_id            = aws_vpc.own.main_route_table_id
  destination_cidr_block    = doublecloud_network_connection.example.aws.peering.managed_ipv4_cidr_block
  vpc_peering_connection_id = doublecloud_network_connection.example.aws.peering.peering_connection_id
}

resource "aws_route" "ipv6" {
  route_table_id              = aws_vpc.own.main_route_table_id
  destination_ipv6_cidr_block = doublecloud_network_connection.example.aws.peering.managed_ipv6_cidr_block
  vpc_peering_connection_id   = doublecloud_network_connection.example.aws.peering.peering_connection_id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `network_id` (String) Network ID

### Optional

- `aws` (Attributes) AWS connection info (see [below for nested schema](#nestedatt--aws))
- `description` (String) Network connection description
- `google` (Attributes) Google Cloud connection info (see [below for nested schema](#nestedatt--google))

### Read-Only

- `id` (String) Network Connection ID

<a id="nestedatt--aws"></a>
### Nested Schema for `aws`

Required:

- `peering` (Attributes) VPC Peering connection info (see [below for nested schema](#nestedatt--aws--peering))

<a id="nestedatt--aws--peering"></a>
### Nested Schema for `aws.peering`

Required:

- `account_id` (String) ID of the VPC owner account
- `ipv4_cidr_block` (String) Customer's IPv4 CIDR block.
    DoubleCloud will create a route to this CIDR using the Peering Connection.
- `region_id` (String) AWS region ID
- `vpc_id` (String) VPC ID

Optional:

- `ipv6_cidr_block` (String) Customer's IPv6 CIDR block.
    DoubleCloud will create a route to this CIDR using the Peering Connection.

Read-Only:

- `managed_ipv4_cidr_block` (String) Managed AWS IPv4 CIDR block.
Customer should create route to this CIDR using Peering Connection.
- `managed_ipv6_cidr_block` (String) Managed AWS IPv6 CIDR block.
Customer should create route to this CIDR using Peering Connection.
- `peering_connection_id` (String) Peering Connection ID.



<a id="nestedatt--google"></a>
### Nested Schema for `google`

Required:

- `name` (String) Name of this peering
- `peer_network_url` (String) Peer network URL

Read-Only:

- `managed_network_url` (String) URL of the managed GCP network


