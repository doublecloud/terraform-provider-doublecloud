---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "doublecloud_clickhouse_cluster Resource - terraform-provider-doublecloud"
subcategory: ""
description: |-
  ClickHouse Cluster resource
---

# doublecloud_clickhouse_cluster (Resource)

ClickHouse Cluster resource

## Example Usage

```terraform
resource "doublecloud_clickhouse_cluster" "example-clickhouse" {
  project_id = var.project_id
  name = "example-clickhouse"
  region_id = "eu-central-1"
  cloud_type = "aws"
  network_id = data.doublecloud_network.default.id

  resources {
    clickhouse {
      resource_preset_id = "s1-c2-m4"
      disk_size = 34359738368
      replica_count = 1
    }
  }

  config {
    log_level = "LOG_LEVEL_TRACE"
    max_connections = 120
  }

  access {
    data_services = ["transfer"]
    ipv4_cidr_blocks = [
      {
        value = "10.0.0.0/8"
        description = "Office in Berlin"
      }
	  ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_type` (String) Cloud provider where the cluster is created. Possible values: `aws` and `gcp`
- `name` (String) Cluster name
- `network_id` (String) ID of the network where the cluster is created
- `project_id` (String) ID of the project where the ClickHouse cluster is created
- `region_id` (String) ID of the region where resources are created

### Optional

- `access` (Block, Optional) (see [below for nested schema](#nestedblock--access))
- `config` (Block, Optional) (see [below for nested schema](#nestedblock--config))
- `description` (String) Cluster description
- `id` (String) Cluster ID
- `resources` (Block, Optional) (see [below for nested schema](#nestedblock--resources))
- `version` (String) Version of the ClickHouse DBMS.

<a id="nestedblock--access"></a>
### Nested Schema for `access`

Optional:

- `data_services` (List of String) List of allowed services
- `ipv4_cidr_blocks` (Attributes List) (see [below for nested schema](#nestedatt--access--ipv4_cidr_blocks))
- `ipv6_cidr_blocks` (Attributes List) (see [below for nested schema](#nestedatt--access--ipv6_cidr_blocks))

<a id="nestedatt--access--ipv4_cidr_blocks"></a>
### Nested Schema for `access.ipv4_cidr_blocks`

Required:

- `value` (String) CIDR block

Optional:

- `description` (String) Description of CIDR block


<a id="nestedatt--access--ipv6_cidr_blocks"></a>
### Nested Schema for `access.ipv6_cidr_blocks`

Required:

- `value` (String) CIDR block

Optional:

- `description` (String) Description of CIDR block



<a id="nestedblock--config"></a>
### Nested Schema for `config`

Optional:

- `asynchronous_insert_log_enabled` (Boolean)
- `asynchronous_insert_log_retention_size` (Number)
- `asynchronous_insert_log_retention_time` (String)
- `asynchronous_metric_log_enabled` (Boolean)
- `asynchronous_metric_log_retention_size` (Number)
- `asynchronous_metric_log_retention_time` (String)
- `background_common_pool_size` (Number) Number of threads performing various operations (mostly garbage collection) for tables with MergeTree engines
- `background_fetches_pool_size` (Number) Number of threads performing background fetches for replicated tables
- `background_merges_mutations_concurrency_ratio` (Number) Ratio of the number of threads to the number of background merges and mutations that can be executed concurrently
- `background_message_broker_schedule_pool_size` (Number) Number of threads for executing background message translation operations
- `background_move_pool_size` (Number) Number of threads performing background moves of data parts for tables with MergeTree engines
- `background_pool_size` (Number) Number of threads performing background merges and mutations for tables with MergeTree engines
- `background_schedule_pool_size` (Number) Number of threads for background jobs for replicated tables, streams in Apache Kafka, and DNS cache updates
- `kafka` (Block, Optional) (see [below for nested schema](#nestedblock--config--kafka))
- `keep_alive_timeout` (String) Time in seconds for which ClickHouse waits for incoming requests before closing the connection
- `log_level` (String) Level of logged events, such as `ERROR` or `TRACE`
- `mark_cache_size` (Number) Approximate size in bytes of the mark cache used by table engines in the MergeTree family
- `max_concurrent_queries` (Number) Maximum number of requests processed simultaneously
- `max_connections` (Number) Maximum number of inbound client connections
- `max_partition_size_to_drop` (Number) Maximum partition size in bytes for the MergeTree family at which a table can be deleted using the `DROP TABLE` query
- `max_table_size_to_drop` (Number) Maximum size in bytes of a table in the MergeTree family that can be deleted using the `DROP TABLE` query
- `metric_log_enabled` (Boolean)
- `metric_log_retention_size` (Number)
- `metric_log_retention_time` (String)
- `opentelemetry_span_log_enabled` (Boolean)
- `opentelemetry_span_log_retention_size` (Number)
- `opentelemetry_span_log_retention_time` (String)
- `part_log_retention_size` (Number)
- `part_log_retention_time` (String)
- `query_log_retention_size` (Number)
- `query_log_retention_time` (String)
- `query_thread_log_enabled` (Boolean)
- `query_thread_log_retention_size` (Number)
- `query_thread_log_retention_time` (String)
- `query_views_log_enabled` (Boolean)
- `query_views_log_retention_size` (Number)
- `query_views_log_retention_time` (String)
- `session_log_enabled` (Boolean)
- `session_log_retention_size` (Number)
- `session_log_retention_time` (String)
- `text_log_enabled` (Boolean)
- `text_log_level` (String)
- `text_log_retention_size` (Number)
- `text_log_retention_time` (String)
- `timezone` (String) Cluster time zone from the IANA Time Zone Database, such as `Africa/Abidjan`
- `total_memory_profiler_step` (Number) RAM in bytes for a stack trace at each memory allocation step
- `total_memory_tracker_sample_probability` (Number) Allows collecting and logging informaiton about random memory allocation and release with the specified probability
- `trace_log_enabled` (Boolean)
- `trace_log_retention_size` (Number)
- `trace_log_retention_time` (String)
- `uncompressed_cache_size` (Number) Cache size in bytes for uncompressed data used by table engines in the MergeTree family
- `zookeeper_log_enabled` (Boolean)
- `zookeeper_log_retention_size` (Number)
- `zookeeper_log_retention_time` (String)

<a id="nestedblock--config--kafka"></a>
### Nested Schema for `config.kafka`

Optional:

- `enable_ssl_certificate_verification` (Boolean)
- `max_poll_interval_ms` (String)
- `sasl_mechanism` (String)
- `sasl_password` (String, Sensitive)
- `sasl_username` (String)
- `security_protocol` (String)
- `session_timeout_ms` (String)



<a id="nestedblock--resources"></a>
### Nested Schema for `resources`

Optional:

- `clickhouse` (Block, Optional) (see [below for nested schema](#nestedblock--resources--clickhouse))
- `dedicated_keeper` (Block, Optional) (see [below for nested schema](#nestedblock--resources--dedicated_keeper))

<a id="nestedblock--resources--clickhouse"></a>
### Nested Schema for `resources.clickhouse`

Optional:

- `disk_size` (Number) Storage volume available to a host in bytes
- `max_disk_size` (Number) Limit for automatical storage volume scale, in bytes. Autoscaling disabled if not set.
- `replica_count` (Number) Number of hosts per shard
- `resource_preset_id` (String) ID of the computational resources preset available to a host (CPU, memory, etc.)
- `shard_count` (Number) Number of shards in the cluster


<a id="nestedblock--resources--dedicated_keeper"></a>
### Nested Schema for `resources.dedicated_keeper`

Optional:

- `disk_size` (Number) Volume of the storage available to a host, in bytes
- `max_disk_size` (Number) Limit for automatical storage volume scale, in bytes. Autoscaling disabled if not set.
- `replica_count` (Number) Number of keeper hosts
- `resource_preset_id` (String) ID of the computational resources preset available to a host (CPU, memory, etc.)


